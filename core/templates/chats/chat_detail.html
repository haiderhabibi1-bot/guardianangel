{% extends "base.html" %}

{% block content %}
<h1>Chat</h1>

<div class="question-card">
    <p>
        <strong>Customer:</strong> {{ chat.customer.username }}<br>
        <strong>Lawyer:</strong> {{ chat.lawyer.profile.display_name }}
    </p>
</div>

<div class="question-card" style="max-height:320px; overflow-y:auto;">
    {% for msg in messages %}
        <p>
            <strong>
                {% if msg.sender == request.user %}You{% else %}{{ msg.sender.username }}{% endif %}:
            </strong>
            {{ msg.message }}
            <br>
            <small>{{ msg.created_at|date:"Y-m-d H:i" }}</small>
        </p>
    {% empty %}
        <p>No messages yet.</p>
    {% endfor %}
</div>

<form method="post" style="margin-top:12px;">
    {% csrf_token %}
    {{ form.as_p }}
    <button type="submit" class="btn">Send</button>
</form>
{% endblock %}
